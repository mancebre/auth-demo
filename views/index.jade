extends layout

title='Members'
block content

  h1 Members Area
  p Welcome to the members area

  if isAdmin
    a.btn.btn-primary(href='/users/add', style='margin-bottom: 10px; margin-right: 30px; float: right;') Add User

  // Add a table to display users
  table.table.table-striped
    thead
      tr
        th Profile Image
        th Name
        th Username
        th Email
        th Contact
        if isAdmin
          th User Role
          th Actions

    tbody
      // Loop through each user and display their information
      each user in users
        tr
          td
            img(src='/uploads/#{user.profileimage}', alt='Profile Image', style='max-width: 32px;')
          td= user.name
          td= user.uname
          td= user.email
          td= user.contact
          if isAdmin
            td= user.role
            td
              div.btn-group-vertical.btn-group-sm
                a.btn.btn-primary(href='/users/profile?userId=#{user._id}') Edit
                form.delete-form(action='/users/delete', method='post')
                  input(type='hidden', name='userId', value='#{user._id}')
                  button.btn.btn-danger(type='submit') Delete

  script.
    $(document).ready(function() {
      $('.delete-form').submit(function() {
        return confirm('Are you sure you want to delete this user?');
      });
    });
